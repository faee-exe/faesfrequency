
<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LIVE RADIO — Digital Station</title>
  <meta name="description" content="A minimal, Loose.fm–style page that plays a live Icecast stream." />
  <meta name="theme-color" content="#0b0b0f" />
  <link rel="preconnect" href="http://92.30.165.19:8000" />
  <style>
    :root{
      --bg:#0b0b0f;          /* near-black */
      --panel:#12121a;       /* card bg */
      --text:#efefef;        /* primary text */
      --muted:#9aa0a6;       /* secondary text */
      --accent:#8affd1;      /* mint accent */
      --accent-2:#8acbff;    /* blue accent */
      --danger:#ff6b6b;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color:var(--text); background:radial-gradient(1200px 800px at 20% -10%, rgba(138,203,255,0.08), transparent 60%),
                         radial-gradient(900px 700px at 100% 0%, rgba(138,255,209,0.06), transparent 50%),
                         var(--bg);
      display:flex; align-items:center; justify-content:center; padding:32px;
    }
    .wrap{width:min(920px,100%);}
    header{display:flex; align-items:center; justify-content:space-between; gap:16px; margin-bottom:28px}
    .brand{display:flex; align-items:center; gap:12px; text-decoration:none; color:var(--text)}
    .logo{width:36px; height:36px; border-radius:10px; background:linear-gradient(135deg, var(--accent), var(--accent-2)); box-shadow:0 0 0 2px rgba(255,255,255,0.04) inset}
    .title{font-size: clamp(18px, 2.2vw, 22px); letter-spacing:0.12em; font-weight:800}
    .badge{font-size:12px; padding:6px 10px; border-radius:999px; background:rgba(138,255,209,0.12); color:var(--accent); text-transform:uppercase; letter-spacing:0.18em}.panel{background:var(--panel); border:1px solid rgba(255,255,255,0.06); border-radius:20px; padding:24px; box-shadow:0 20px 60px rgba(0,0,0,0.45)}

.hero{display:grid; grid-template-columns: 1fr auto; gap:24px; align-items:center}
.hero h1{margin:0; font-size: clamp(28px, 5vw, 56px); line-height:1.05; letter-spacing:-0.02em}
.sub{margin-top:10px; color:var(--muted)}

.controls{display:flex; align-items:center; gap:14px; flex-wrap:wrap}
.play{--size:88px; width:var(--size); height:var(--size); border:none; border-radius:999px; display:grid; place-items:center; cursor:pointer; position:relative;
  background:linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02)); color:var(--text);
  box-shadow:0 2px 0 rgba(255,255,255,0.06) inset, 0 12px 26px rgba(0,0,0,0.5);
  transition: transform .12s ease;}
.play:hover{transform:translateY(-1px)}
.play:active{transform:translateY(1px)}
.ring{position:absolute; inset:-8px; border-radius:inherit; pointer-events:none; background:conic-gradient(from 0deg, var(--accent), var(--accent-2), var(--accent)); filter:blur(14px); opacity:.18}
.icon{width:28px; height:28px}

.level{display:flex; gap:2px; align-items:flex-end; height:28px; width:40px}
.bar{width:4px; background:linear-gradient(180deg, var(--accent), var(--accent-2)); border-radius:2px; opacity:.6; animation:vu 1.1s linear infinite alternate}
.bar:nth-child(2){animation-duration:1.3s}
.bar:nth-child(3){animation-duration:0.9s}
.bar:nth-child(4){animation-duration:1.5s}
@keyframes vu{from{height:6px} to{height:100%}}

.volume{appearance:none; height:6px; width:180px; background:rgba(255,255,255,0.12); border-radius:999px; outline:none}
.volume::-webkit-slider-thumb{appearance:none; width:18px; height:18px; border-radius:50%; background:linear-gradient(135deg, var(--accent), var(--accent-2)); box-shadow:0 0 0 2px var(--panel) inset}

.status{font-size:14px; color:var(--muted)}
.links{display:flex; gap:14px; flex-wrap:wrap}

.ticker{margin-top:18px; padding:8px 12px; border-radius:10px; background:rgba(255,255,255,0.04); display:flex; align-items:center; gap:10px}
.dot{width:8px; height:8px; border-radius:50%; background:var(--danger); box-shadow:0 0 10px var(--danger)}
.ticker span{font-size:12px; letter-spacing:0.24em; text-transform:uppercase}

footer{margin-top:22px; display:flex; align-items:center; justify-content:space-between; gap:12px; color:var(--muted); font-size:13px}
footer a{color:var(--muted)}
.hint{opacity:.9}
.small{font-size:12px}

@media (max-width:720px){
  .hero{grid-template-columns: 1fr}
  .play{--size:76px}
  .volume{width:140px}
}

  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <a class="brand" href="#" aria-label="Home">
        <div class="logo" aria-hidden="true"></div>
        <div class="title">DIGITAL RADIO</div>
      </a>
      <div class="badge" id="live-badge">ON&nbsp;AIR</div>
    </header><section class="panel hero" aria-label="Live stream">
  <div>
    <h1>Loose‑style Live Stream</h1>
    <p class="sub">Click play to connect to our Icecast mount. Clean, minimal, mobile‑friendly. Works with modern browsers.</p>

    <div class="ticker" aria-live="polite">
      <div class="dot" aria-hidden="true"></div>
      <span id="ticker-text">Stand by</span>
    </div>
  </div>

  <div class="controls">
    <button class="play" id="playBtn" aria-pressed="false" aria-label="Play live radio">
      <div class="ring" aria-hidden="true"></div>
      <svg class="icon" id="playIcon" viewBox="0 0 24 24" fill="currentColor" role="img" aria-hidden="true"><path d="M8 5v14l11-7z"/></svg>
      <svg class="icon" id="pauseIcon" viewBox="0 0 24 24" fill="currentColor" role="img" aria-hidden="true" style="display:none"><path d="M6 5h4v14H6zM14 5h4v14h-4z"/></svg>
    </button>

    <div class="level" aria-hidden="true">
      <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
    </div>

    <input id="vol" class="volume" type="range" min="0" max="1" step="0.01" value="0.9" aria-label="Volume"/>
    
    <div class="status" id="status">Idle</div>
  </div>

  <audio id="player" crossorigin="anonymous" preload="none"></audio>
</section>

<footer>
  <div class="hint">Tip: If you host this on GitHub Pages (HTTPS), your stream must be served over HTTPS too, or browsers will block it as mixed content.</div>
  <div class="links small">
    <a id="open-native" href="http://92.30.165.19:8000/stream" target="_blank" rel="noreferrer">Open Stream</a>
  </div>
</footer>

  </div>  <script>
    // ====== CONFIG ======
    const STREAM_URL = "http://92.30.165.19:8000/stream"; // Provided Icecast mount URL
    const STATION_NAME = "Digital Radio"; // Shown in Media Session and document title

    // ====== ELEMENTS ======
    const audio = document.getElementById('player');
    const playBtn = document.getElementById('playBtn');
    const playIcon = document.getElementById('playIcon');
    const pauseIcon = document.getElementById('pauseIcon');
    const vol = document.getElementById('vol');
    const statusEl = document.getElementById('status');
    const ticker = document.getElementById('ticker-text');

    // ====== INIT ======
    document.title = STATION_NAME + ' — LIVE RADIO';
    audio.src = STREAM_URL;
    audio.volume = parseFloat(vol.value);

    // Mixed content helper
    function isMixedContentBlocked(){
      return location.protocol === 'https:' && !STREAM_URL.startsWith('https:');
    }

    if(isMixedContentBlocked()){
      statusEl.textContent = 'Blocked: stream must be HTTPS when site is on HTTPS';
      ticker.textContent = 'Enable HTTPS on your Icecast or serve this page over HTTP.';
    } else {
      statusEl.textContent = 'Ready';
      ticker.textContent = 'Click Play to connect to the live stream';
    }

    // ====== CONTROLS ======
    async function toggle(){
      if(audio.paused){
        try{
          statusEl.textContent = 'Connecting…';
          ticker.textContent = 'Connecting to Icecast…';
          await audio.play();
        }catch(err){
          console.error(err);
          statusEl.textContent = 'Error: ' + (err && err.message ? err.message : 'Unable to play');
          ticker.textContent = 'Playback failed. See console for details.';
        }
      }else{
        audio.pause();
      }
    }

    playBtn.addEventListener('click', toggle);
    vol.addEventListener('input', ()=>{ audio.volume = parseFloat(vol.value); });

    // Update UI based on audio events
    audio.addEventListener('play', ()=>{
      playBtn.setAttribute('aria-pressed','true');
      playIcon.style.display='none';
      pauseIcon.style.display='block';
      statusEl.textContent = 'Live';
      ticker.textContent = 'Live • Streaming from Icecast';
      if ('mediaSession' in navigator){
        navigator.mediaSession.metadata = new MediaMetadata({
          title: 'Live Stream', artist: STATION_NAME, album: 'On Air'
        });
        navigator.mediaSession.playbackState = 'playing';
      }
    });

    audio.addEventListener('pause', ()=>{
      playBtn.setAttribute('aria-pressed','false');
      playIcon.style.display='block';
      pauseIcon.style.display='none';
      statusEl.textContent = 'Paused';
      ticker.textContent = 'Paused • Click Play to resume';
      if ('mediaSession' in navigator){
        navigator.mediaSession.playbackState = 'paused';
      }
    });

    audio.addEventListener('stalled', ()=>{ statusEl.textContent='Buffering…'; ticker.textContent='Buffering…'; });
    audio.addEventListener('waiting', ()=>{ statusEl.textContent='Buffering…'; ticker.textContent='Buffering…'; });
    audio.addEventListener('error', (e)=>{
      const code = audio.error && audio.error.code; // 1: aborted, 2: network, 3: decode, 4: src not supported
      statusEl.textContent = 'Audio error' + (code? ' (code '+code+')':'' );
      ticker.textContent = 'Could not load the stream.';
    });

    // Keyboard shortcuts
    window.addEventListener('keydown', (e)=>{
      if(e.code === 'Space'){ e.preventDefault(); toggle(); }
      if(e.key === 'm' || e.key === 'M'){ audio.muted = !audio.muted; }
      if(e.key === '+'){ vol.value = Math.min(1, (parseFloat(vol.value)+0.05)).toFixed(2); vol.dispatchEvent(new Event('input')); }
      if(e.key === '-') { vol.value = Math.max(0, (parseFloat(vol.value)-0.05)).toFixed(2); vol.dispatchEvent(new Event('input')); }
    });
  </script></body>
</html>
